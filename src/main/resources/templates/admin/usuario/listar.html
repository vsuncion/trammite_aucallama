<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<!-- CABECERA  PLANTILLA-->
<head th:replace="loyout/plantilla :: html_cabecera">
</head>
<body>

	<div class="wrapper">

		<!-- MENU PLANTILLA -->
		<nav th:replace="loyout/plantilla :: html_menu"></nav>

		<!-- CONTENIDO PLANTILLA -->
		<div id="content">
			<nav class="navbar navbar-expand-lg navbar-light bg-light"
				th:replace="loyout/plantilla :: html_submenu"></nav>

			<!-- CONTENIDO EDITABLE INICIO-->
			<div class="rows">

				<div class="card text-center">
					<div class="card-body">
						<h5 class="card-title">USUARIOS</h5>


						<div class="card text-left">
							<div class="card-body">
								<form name="usuarios" id="usuarios"
									th:object="${usuarios}"
									th:action="@{/admin/mantenimiento/buscarUsuariosPersona}"
									method="post">


									<div class="form-group row">
										<label for="staticEmail" class="col-sm-1 col-form-label">TIPO</label>
										<div class="col-sm-4 text-left">
											<select id="NCBTIPOCRITERIO" name="NCBTIPOCRITERIO"
												th:field="*{NCBTIPOCRITERIO}" class="form-control">
												<option th:each="i : ${cbCriterioBusqueda}"
													th:value="${i.codigo}" th:text="${i.etiqueta}"></option>
											</select>
										</div>

										<label for="CAJABUSQUEDA"
											class="col-sm-1 text-right col-form-label">VALOR</label>
										<div class="col-sm-4 text-left">
											<input  type="text"  onkeyup="javascript:this.value=this.value.toUpperCase();" class="form-control" id="CAJABUSQUEDA"
												name="CAJABUSQUEDA" th:field="*{CAJABUSQUEDA}"
												placeholder="Ingrese Criterio Busqueda">
										</div>

										<div class="col-sm-2">
											<button type="submit" class="btn btn-outline-primary">
												<i class="fas fa-search"></i> BUSCAR
											</button>
										</div>

									</div>

								</form>
							</div>
						</div>


					</div>
				</div>
				
				
				
				<div class="card">
					<h5 class="card-header">LISTA DE USUARIOS</h5>
					<div class="card-body">
						<table class="table table-hover" id="listaUsuarios">
							<thead>
								<tr>
									<th scope="col">ITEM</th>
									<th scope="col">USUARIO</th> 
									<th scope="col">NOMBRE</th>
									<th scope="col">OFICINA</th> 
									<th scope="col">PERFIL</th> 
									<th scope="col">CREAR USUARIO</th>
									<th scope="col">ACTUALIZAR</th>
									<th scope="col">ELIMINAR</th>
								</tr>
							</thead>
							<tbody> 
								 <tr th:each="i : ${listarUsuarioPersona}" >
									<td scope="row"><span th:text="${i.NITEM}"></span></td>
									<td><span  th:text="${i.VCORREO}"></span></td>
								    <td><span  th:text="${i.VNOMBRECOMPLETO}"></span></td>
								    <td><span  th:text="${i.VOFICINA}"></span></td>
								    <td><span  th:text="${i.VPERFIL}"></span></td> 
								    <td th:if="${i.NIDUSUARIOPK==null}"><a th:href="@{/admin/mantenimiento/nuevoUsuario?IDTRABAJADOR=} + ${i.NTRABAJADORFK}" class="btn btn-outline-primary" role="button"><i class="fas fa-edit"></i></a>  </td> 
								    <td th:if="${i.NIDUSUARIOPK!=null}"></td> 
								    
								    <td th:if="${i.NIDUSUARIOPK!=null}"><a th:href="@{/admin/mantenimiento/editarUsuarioPersona?IDUSUARIO=}+ ${i.NIDUSUARIOPK}" class="btn btn-outline-primary" role="button"><i class="fas fa-edit"></i></a></td>
									<td th:if="${i.NIDUSUARIOPK==null}"></td> 
									
									<td th:if="${i.NIDUSUARIOPK!=null}"><a th:href="@{/admin/mantenimiento/eliminarUsuarioPersona?IDTRABAJADOR=}+ ${i.NTRABAJADORFK} +'&IDUSUARIO='+${i.NIDUSUARIOPK}+'&IDUSUARIOPERFIL='+${i.NIDUSUAPERFILFK}" class="btn btn-outline-primary" role="button" th:onclick="return funeliminartag(this,[[${i.VCORREO}]])"><i class="far fa-trash-alt"></i></a></td>
								    <td th:if="${i.NIDUSUARIOPK==null}"></td> 
								</tr>
								 
							</tbody>
						</table>
					</div>
				</div>
 

			</div>
		</div>


	</div>

	<div th:replace="loyout/plantilla :: html_scrip"></div>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
	<script th:src="@{/js/sweetAlert.js}" type="text/javascript"></script>
	<script type="text/javascript">
		$('#listaUsuarios').paginate({ 
			limit: 10,
			initialPage: 0,
			previous: true, 
			previousText: 'Anterior',
			next: true,
			nextText: 'Siguiente',
			optional: false
			});
	</script>
</body>
</html>
